version: v2
plugins:
  # C
  - protoc_builtin: c
    out: c/types

  # C# (needs work)
  # - protoc_builtin: csharp
  #   out: csharp/types

  # C++
  - protoc_builtin: cpp
    out: cpp/types

  # Java
  - protoc_builtin: java
    out: java/types

  # Kotlin
  - protoc_builtin: kotlin
    out: kotlin/types

  # Objective-C
  - protoc_builtin: objc
    out: objc/types

  # PHP
  - protoc_builtin: php
    out: php/types

  # Python
  - protoc_builtin: python
    out: python/types

  # Ruby
  - protoc_builtin: ruby
    out: ruby/types

  # Rust
  - local: protoc-gen-prost
    out: rust/types

  # Scala
  - local: protoc-gen-scala
    out: scala/types
    opt:
      - flat_package

  # Swift
  # The issue is Swift's filename uniqueness constraint. 
  # Swift can't compile two files named module.pb.swift in the same target, even if they're in different subdirectories.
  # Two protobuf files are generating the same Swift filename:
  # cosmos/app/runtime/v1alpha1/module.proto → module.pb.swift
  # cosmos/app/v1alpha1/module.proto → module.pb.swift
  # Both end up in XionTypesCosmosPart00 target, causing the collision.
  # Fix: Use path-based naming for Swift protobuf generation.
  - protoc_builtin: swift
    out: swift/types
    opt: FileNaming=PathToUnderscores

  # TypeScript
  # - local: protoc-gen-ts_proto
  #   out: ts/types
  #   opt: "esModuleInterop=true,forceLong=long,useOptionals=messages,outputClientImpl=grpc-web"
